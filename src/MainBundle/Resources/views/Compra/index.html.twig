{% extends "base.html.twig" %}

{% block content %}
    <div class="row">
        <!-- col -->
        <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
            <h1 class="page-title txt-color-blueDark"><i class="fa fa-shopping-cart"></i> Gesti√≥n de Compras <span>>
                    Nueva Compra </span></h1>
        </div>
        <!-- end col -->
    </div>
    <!-- widget grid -->
    <section id="widget-grid" class="">
        <!-- row -->
        <div class="row">
            <!-- NEW WIDGET START -->
            <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="jarviswidget jarviswidget-color-white" id="wid-id-0" data-widget-editbutton="false">
                    <header>
                        <span class="widget-icon"> <i class="fa fa-shopping-cart"></i> </span>
                        <h2> Compra </h2>
                    </header>
                    <div>
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->
                        </div>
                        <div class="widget-body no-padding">
                            <div class="widget-body-toolbar">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2">
                                        <div class="form-group">
                                            <label class="col-md-2 control-label" style="padding-top: 7px;">Fecha:</label>
                                            <div class="col-md-10">
                                                <input class="form-control datepicker filters" id="txtFecha" type="text" data-dateformat="dd/mm/yy" value="{{ "now"|date("d/m/Y")}}">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                                        <div class="form-group">
                                            <label class="col-md-3 control-label" style="padding-top: 7px;">Proveedor:</label>
                                            <div class="col-md-9">
                                                <select id="cmbProveedor" class="filters" style="width:100%">
                                                    <option value="">Ingrese un proveedor...</option>
                                                    {% for proveedor in proveedores %}
                                                        <option value="{{ proveedor.id }}">{{ proveedor.nombre }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                                        <div class="form-group">
                                            <label class="col-md-2 control-label" style="padding-top: 7px;">Rubro:</label>
                                            <div class="col-md-9">
                                                <select id="cmbRubro" class="filters" style="width:100%">
                                                    <option value="">Ingrese un rubro...</option>
                                                    {% for rubro in rubros %}
                                                        <option value="{{ rubro.id }}">{{ rubro.descripcion }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-1 col-md-1 col-lg-1">
                                        <a class="btn btn-primary" id="editar">Editar</a>
                                    </div>
                                    <div class="col-xs-12 col-sm-1 col-md-1 col-lg-1">
                                        <a class="btn btn-primary" id="cancelar">Cancelar</a>
                                    </div>            
                                    <div class="col-xs-12 col-sm-1 col-md-1 col-lg-1">
                                        <a class="btn btn-primary" id="guardar">Guardar</a>
                                    </div>
                                </div>
                            </div>

                            <div id="example6"></div>
                        </div>
                    </div>
                </div>
            </article>
            <!-- WIDGET END -->
        </div>
        <!-- end row -->
    </section>
    <!-- end widget grid -->
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {% javascripts 'SmartAdmin/jquery-handsontable/handsontable.full.js'
    %}
    <script src="{{ asset_url }}" type="text/javascript"></script>
    {% endjavascripts %}

    <script type="text/javascript">
        $(document).ready(function () {
            $('#cmbProveedor, #cmbRubro').select2();

            var
                    container6 = document.getElementById('example6'),
                    hot6;

            hot6 = new Handsontable(container6, {
                data: [
                    model({id: 1, name: 'Ted Right', address: ''})
                ],
                dataSchema: model,
                colHeaders: ['Cantidad', 'Insumo', 'Rubro', 'Precio unitario', 'Precio total'],
                columns: [
                    {data: property('Cantidad')},
                    {data: property('Insumo')},
                    {data: property('Rubro')},
                    {data: property('Precio unitario')},
                    {data: property('Precio total')}
                ],
                minSpareRows: 1
            });

            function model(opts) {
                var
                        _pub = {},
                        _priv = {
                            "id": undefined,
                            "name": undefined,
                            "address": undefined
                        };

                for (var i in opts) {
                    if (opts.hasOwnProperty(i)) {
                        _priv[i] = opts[i];
                    }
                }

                _pub.attr = function (attr, val) {
                    if (typeof val === 'undefined') {
                        window.console && console.log("\t\tGET the", attr, "value of", _pub);
                        return _priv[attr];
                    }
                    window.console && console.log("SET the", attr, "value of", _pub);
                    _priv[attr] = val;

                    return _pub;
                };

                return _pub;
            }

            function property(attr) {
                return function (row, value) {
                    return row.attr(attr, value);
                }
            }
        });
    </script>
{% endblock %}